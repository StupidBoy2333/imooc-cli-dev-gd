# 新服务器前端部署与宝塔面板使用指南

> 适用于「新买的云服务器（CentOS / Ubuntu）」+「宝塔面板」+「部署前端静态站点」的场景。

## 一、基础环境准备

- **推荐系统**：CentOS 7+/8、Ubuntu 20.04+
- **前提条件**：
  - 已拿到服务器 IP、root 账号和密码（或秘钥）
  - 已放行 22/80/443/8888 等常用端口（安全组里设置）

### 1. 使用 SSH 连接服务器

在本地终端（或 XShell / FinalShell 等）执行：

```bash
ssh root@你的服务器IP
```

首次连接会提示是否信任，输入 `yes`，然后输入密码即可。

### 2. 更新系统（可选但推荐）

**CentOS：**
```bash
yum update -y
```

**Ubuntu：**
```bash
apt update && apt upgrade -y
```

---

## 二、安装宝塔面板（BT Panel）

> 以下为官方一键安装脚本，实际以宝塔官网为准。

### 1. 安装命令

**CentOS：**
```bash
yum install -y wget && wget -O install.sh https://download.bt.cn/install/install_6.0.sh && sh install.sh
```

**Ubuntu / Debian：**
```bash
wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh
```

安装过程会：
- 询问是否安装，输入 `y`
- 自动安装依赖和面板

### 2. 记录宝塔登录信息

安装完成后终端会输出类似信息：

```text
Bt-Panel:  http://服务器IP:8888/xxxx
username:  admin
password:  xxxxxxxx
```

务必**保存好面板地址、账号和密码**。

### 3. 放行宝塔端口

在**云厂商控制台安全组**中放行端口：
- 8888（宝塔面板）
- 80（HTTP）
- 443（HTTPS）

如果服务器自身有防火墙，也需要放行（CentOS 示例）：

```bash
firewall-cmd --zone=public --add-port=8888/tcp --permanent
firewall-cmd --zone=public --add-port=80/tcp --permanent
firewall-cmd --zone=public --add-port=443/tcp --permanent
firewall-cmd --reload
```

---

## 三、首次登录宝塔并安装环境

### 1. 登录宝塔面板

在浏览器访问：

```text
http://服务器IP:8888/xxxx
```

使用上一步记录的账号密码登录。

### 2. 安装 LNMP/LAMP 环境（推荐 LNMP）

登录后宝塔会弹出推荐安装对话框，选择：
- **Nginx**（Web服务器）
- **MySQL**（如暂时没后端可不装）
- **PHP**（如仅部署纯静态前端，可不装）

点击**一键安装**，等待安装完成。

> 纯静态前端项目：只需要 **Nginx** 即可。

---

## 四、在宝塔中创建站点

### 1. 新建站点

1. 左侧菜单点击 **网站**
2. 点击右上角 **添加站点**
3. 填写信息：
   - **域名**：例如 `www.example.com`（也可以先用服务器 IP，后续再绑定域名）
   - **根目录**：默认即可，形如 `/www/wwwroot/你的域名`
   - **FTP / 数据库**：前端项目一般可不创建
4. 点击 **提交**

宝塔会自动：
- 创建网站根目录
- 配置 Nginx 虚拟主机

### 2. 域名解析（如果有域名）

在域名服务商管理后台（阿里云、腾讯云等）：
- 添加一条 A 记录：
  - **主机记录**：`@` 或 `www`
  - **记录类型**：A
  - **记录值**：服务器 IP

等待解析生效（通常几分钟内）。

---

## 五、构建前端项目

> 在本地完成打包，然后将构建产物上传到宝塔。

### 1. 本地打包

以常见的 Vue/React 项目为例：

```bash
# 安装依赖
npm install

# 构建生产环境
npm run build
```

常见输出目录：
- Vue CLI：`dist/`
- Vite：`dist/`
- Create React App：`build/`

假设构建产物目录为 `dist/`。

### 2. 将构建产物打包

在本地项目根目录：

```bash
zip -r dist.zip dist
```

生成 `dist.zip` 用于上传。

---

## 六、在宝塔中部署前端静态资源

### 1. 上传构建产物

1. 登录宝塔面板
2. 左侧点击 **文件**
3. 进入你站点的根目录，例如：
   - `/www/wwwroot/www.example.com`
4. 点击顶部 **上传**，选择本地 `dist.zip` 上传
5. 上传完成后，选中 `dist.zip`，点击 **解压**：
   - 可直接解压到当前目录
   - 或解压后将 `dist` 中的文件移动到网站根目录

> 目标：网站根目录下直接是 `index.html`、`assets/` 等文件。

### 2. 配置 Nginx 站点（前端路由需注意）

进入：**网站 → 选中你的站点 → 设置 → 配置文件**，看到类似：

```nginx
server {
    listen 80;
    server_name www.example.com;
    root /www/wwwroot/www.example.com;
    index index.html index.htm;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

说明：
- `root`：指向你的前端文件所在目录
- `try_files`：针对 **前端路由（history 模式）**，将找不到的路径交给 `index.html`

保存后点击 **重载配置** 或 **重启 Nginx**。

---

## 七、常见问题排查

### 1. 访问域名显示默认页面或 404

检查：
- 网站根目录是否有 `index.html`
- 是否把文件解压在了 `dist/dist` 这种多层目录
- Nginx 配置的 `root` 路径是否正确

### 2. 域名访问不到服务器

检查：
- 域名解析是否指向了正确 IP
- 云服务器安全组是否放行 80 端口
- Nginx 是否已启动（宝塔左侧「软件商店 → Nginx」状态）

### 3. 前端路由刷新 404

确保 Nginx `location /` 中有：

```nginx
try_files $uri $uri/ /index.html;
```

并重载 Nginx。

---

## 八、最简前端部署流程总结（纯静态站点）

1. **购买服务器** → 开通后记录 IP，放行 22/80/443/8888 端口  
2. **SSH 连接服务器** → 执行宝塔安装脚本  
3. **登录宝塔面板** → 安装 Nginx  
4. **宝塔创建站点** → 记住站点根目录路径  
5. **本地打包前端项目** → 产生 `dist/`，压缩为 `dist.zip`  
6. **宝塔文件管理上传 dist.zip** → 解压到站点根目录  
7. **配置 Nginx（可选）** → 设置 `root` 和 `try_files`  
8. **浏览器访问 IP 或域名** → 验证站点是否正常访问  

如果后续只更新前端代码，只需：**重新打包 → 上传新 dist → 覆盖旧文件** 即可。  

